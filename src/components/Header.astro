---
import { socialLinks } from "./SocialLinks";
import Logo from "../images/Duisterethomas-Logo.svg";
import Social from "./Social.astro";

/** Main menu items */
const textLinks: { label: string; href: string }[] = [
    { label: "Home", href: "/" },
    { label: "Gear", href: "/gear" },
];

/** Icon links to social media */
const iconLinks: {
    label: string;
    href: string;
    icon: string;
    color: string;
}[] = [
    socialLinks["youtube"],
    socialLinks["soundcloud"],
    socialLinks["modrinth"],
    socialLinks["github"],
    socialLinks["itchio"],
    socialLinks["gamejolt"],
    socialLinks["twitch"],
    socialLinks["reddit"],
];

/** Test if a link is pointing to the current page. */
const isCurrentPage = (href: string) => {
    let pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, "");
    if (pathname.at(0) !== "/") pathname = "/" + pathname;
    if (pathname.at(-1) !== "/") pathname += "/";
    return pathname === href || (href !== "/" && pathname.startsWith(href));
};
---

<header class="pointer-events-none absolute z-9999 mb-14 grid w-full items-center gap-4 px-12 py-8 font-medium md:fixed md:grid-cols-[1fr_auto_1fr]">
    <a
        href="/"
        class="flex items-center gap-2 justify-self-center md:justify-self-start"
    >
        <Logo width="100" height="100" />
    </a>
    <nav class="bg-noise-500 m-0 flex w-fit list-none gap-1.5 justify-self-center rounded-full p-2 text-sm leading-[1.2] shadow-[0px_0px_4px_#5d5d5d] backdrop-blur-xl text-shadow-none">
        {
            textLinks.map(({ label, href }) => (
                <a
                    aria-current={isCurrentPage(href) ? "page" : null}
                    class="aria-[current=page]:bg-accent-regular hover:bg-accent-overlay focus:bg-accent-overlay rounded-full px-3.5 py-2.5 text-gray-300 hover:text-gray-100 focus:text-gray-100 aria-[current=page]:text-white"
                    href={href}
                >
                    {label}
                </a>
            ))
        }
    </nav>
    <div class="bg-noise-500 relative flex flex-row flex-nowrap justify-between justify-self-center rounded-full px-2 py-1 text-xl shadow-[0px_0px_4px_#5d5d5d] before:absolute before:inset-0 before:-z-1 before:h-full before:w-full before:rounded-full before:backdrop-blur-xl md:justify-self-end">
        {
            iconLinks.map(({ href, icon, label, color }) => (
                <Social href={href} icon={icon} label={label} color={color} />
            ))
        }
    </div>
</header>
